<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
  <meta http-equiv="Content-Security-Policy" content="default-src *; script-src &apos;self&apos; &apos;unsafe-inline&apos; &apos;unsafe-eval&apos; *; style-src  &apos;self&apos; &apos;unsafe-inline&apos; *">
  <title></title>


  <!-- compiled css output -->
  <link href="css/ionic.app.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
  <link href="css/animate.css" rel="stylesheet">

  <!-- ionic/angularjs js -->
  <script src="lib/ionic/js/ionic.bundle.js"></script>

  <!-- jQuery -->
  <!--<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>-->
  <script src="lib/jquery/dist/jquery.min.js"></script>



  <!-- moment -->
  <!--<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.8.4/moment.min.js"></script>-->
  <script src="lib/moment/min/moment.min.js"></script>

  <!-- angular moment -->
  <!--<script src="//cdnjs.cloudflare.com/ajax/libs/angular-moment/0.8.2/angular-moment.min.js"></script>-->
  <script src="lib/angular-moment/angular-moment.min.js"></script>

  <!-- For GPS location-->
  <script src="lib/ngCordova/dist/ng-cordova.min.js"></script>

  <!-- cordova script (this will be a 404 during development) -->
  <script src="cordova.js"></script>


  <!--<script src="lib/cordova-facebook-connect-plugin/lib/cordova-facebook-connect-plugin.js"></script>-->


  <!--<script src='lib/facebook-connect-plugin/index.js'></script>-->

  <script src="http://192.168.0.116:8080/socket.io/socket.io.js"></script>

  <!-- Other Libraries-->
  <script src="lib/angular-sanitize/angular-sanitize.min.js"></script>
  <script src="lib/angular-socket-io/socket.js"></script>

  <!-- your app's js -->
  <script src="js/app.js"></script>
  <script src="js/controllers.js"></script>
  <script src="js/services.js"></script>





</head>
<body ng-app="starter">
<ion-nav-view animation="slide-left-right"></ion-nav-view>

<script id="menu.html" type="text/ng-template">
  <ion-side-menus>

    <ion-side-menu side="left">
      <ion-content class="background-color-ruder">
        <div class="card card-profile" ng-click="showProfile()" menu-close>
          <div class="item item-avatar-center-big">
            <img ng-src="{{'http://graph.facebook.com/' + user.userID + '/picture?type=large'}}">
            <h2 ng-bind="user.name"></h2>
            <p>Title</p>
          </div>
        </div>
        <ul class="list list-settings padding">
          <a href ="#/menu/tabs/discover" class="item item-icon-left" menu-close><i class="icon ion-location"></i>Tag place</a>
          <a href ="#/menu/home" class="item item-icon-left" menu-close><i class="icon ion-settings"></i>App Setting</a>
          <a href="#" class="item item-icon-left" menu-close ng-click="rateUs()"><i class="icon ion-android-star"></i>Rate this app</a>
        </ul>
      </ion-content>
    </ion-side-menu>

    <ion-side-menu-content>
      <ion-nav-bar class="bar-royal">
        <ion-nav-back-button>
        </ion-nav-back-button>
        <ion-nav-buttons side="left">
          <button class="button button-icon button-clear ion-navicon" menu-toggle="left">
          </button>
        </ion-nav-buttons>
      </ion-nav-bar>
      <ion-nav-view name="menuContent"></ion-nav-view>
    </ion-side-menu-content>

  </ion-side-menus>
</script>

<script id="tabs.html" type="text/ng-template">

  <ion-nav-bar class="bar-royal">
    <ion-nav-back-button class="button-icon ion-arrow-left-c">
    </ion-nav-back-button>

    <ion-nav-buttons side="left">
      <button class="button button-icon button-clear ion-navicon" menu-toggle="left"></button>
    </ion-nav-buttons>

    <ion-nav-buttons side="right">
      <button class="button button-icon button-clear ion-android-refresh" ng-click="refreshProfile()"></button>
      <button ng-if="notificationsAvailable === false" class="button button-icon button-clear ion-android-notifications-none" ng-click="showNotifications()"></button>
      <button ng-if="notificationsAvailable === true" class="button button-icon button-clear ion-android-notifications" ng-click="showNotifications()"></button>
    </ion-nav-buttons>
  </ion-nav-bar>

  <ion-tabs class="tabs-striped tabs-royal tabs-icon-only">

    <ion-tab icon="ion-person-stalker" href="/menu/tabs/discover">
      <ion-nav-view name="discover-tab"></ion-nav-view>
    </ion-tab>

    <ion-tab icon="ion-chatbubbles" href="/menu/tabs/chatList">
      <ion-nav-view name="chat-tab"></ion-nav-view>
    </ion-tab>

    <ion-tab icon="ion-social-rss" href="/menu/tabs/feeds">
      <ion-nav-view name="feeds-tab"></ion-nav-view>
    </ion-tab>

  </ion-tabs>
</script>

<script id="home.html" type="text/ng-template">
  <ion-view class="home-view">
    <ion-nav-title>
      <span>My Profile</span>
    </ion-nav-title>
    <ion-content class="background-color-ruder">
      <div class="row">
        <div class="col">
          <img ng-src="{{'http://graph.facebook.com/' + user.userID + '/picture?type=large'}}" class="profile-picture-main">
          <h2 class="profile-name" ng-bind="user.name"></h2>
          <p class="profile-title">Title</p>
          <p class="profile-caption">Caption</p>
          <div class="row">
            <div class="col col-25 col-offset-25">
              <p class="lg-red">22</p>
              <p class="md-white">Friends</p>
            </div>
            <div class="col col-25">
              <p class="lg-red">100</p>
              <p class="md-white">Followers</p>
            </div>
          </div>

          <div class="list">
            <label class="item item-input item-stacked-label">
              <span class="input-label">Name</span>
              <input type="text" ng-model="userData.name">
            </label>
            <label class="item item-input item-stacked-label">
              <span class="input-label">Hyper Pitch</span>
              <input type="text" ng-model="userData.hyperpitch" placeholder="Enter your hyperpitch here">
            </label>
            <button class="button button-block button-positive" ng-click="updateProfile(userData.name, userData.hyperpitch)">
              save
            </button>
          </div>


          <a class="button button-assertive button-block button-outline" ng-click="showLogOutMenu()">
            Log Out
          </a>
        </div>
      </div>
    </ion-content>
  </ion-view>
</script>

<script id="notifications.html" type="text/ng-template">
  <ion-view class="notifications-view">
    <ion-nav-title>
      <span>Notifications</span>
    </ion-nav-title>
    <ion-content class="">
      <div class="list">

        <div class="item item-button-right" ng-repeat="item in receivedRequests">
          {{item.name + " has sent you a friend request"}}
          <button class="button button-positive" ng-click="acceptRequest(item.userId)">
            <i class="icon ion-android-done"></i>
          </button>
        </div>

      </div>
    </ion-content>
  </ion-view>
</script>

<script id="rudder.html" type="text/ng-template">
  <ion-view class="rudder-view" cache-view="false">
    <ion-content scroll="false">
      <div class="top-content row">
        <div class="app-copy col col-top">
          <h1 class="app-logo">Vibrance</h1>
          <p class="app-tagline">
            >>Connect<<
          </p>
        </div>
      </div>
      <!--<div class="bottom-content row">-->
        <!--<div class="col col-bottom">-->
          <!--<a class="facebook-sign-in button button-block" ng-click="checkUserLoginStatus()">-->
            <!--Log in with Facebook-->
          <!--</a>-->
        <!--</div>-->
      <!--</div>-->
    </ion-content>
  </ion-view>
</script>

<script id="welcome.html" type="text/ng-template">
  <ion-view class="welcome-view" cache-view="false">
    <ion-content scroll="false">
      <div class="top-content row">
        <div class="app-copy col col-top">
          <h1 class="app-logo">Vibrance</h1>
          <p class="app-tagline">
            Connecting people.
          </p>
        </div>
      </div>
      <div class="bottom-content row">
        <div class="col col-bottom">
          <a class="facebook-sign-in button button-block" ng-click="facebookSignIn()">
            Log in with Facebook
          </a>
        </div>
      </div>
    </ion-content>
  </ion-view>
</script>

<script id="discover.html" type="text/ng-template">
  <ion-view view-title="" class="background-color-grey">
    <!--<ion-header-bar class="bar-royal bar-subheader item-input-inset" position-bars-and-content>-->
      <!--<label class="item-input-wrapper">-->
        <!--<i class="icon ion-ios-search placeholder-icon"></i>-->
        <!--<input type="search" placeholder="Search">-->
      <!--</label>-->
    <!--</ion-header-bar>-->
    <ion-content class="padding has-header has-tabs-top">
      <ion-list ng-controller="EventsCtrl">
        <!--<i class="icon ion-beer" ng-if="jQuery.isEmptyObject($scope.items)"></i>-->
        <ion-item ng-repeat="item in items" class="item item-icon-left" href="#" ng-click="showPopupIfNotCheckedIn($index)">
          <i class="icon ion-beer" ng-if="item.category === 'pub'"></i>
          <i class="icon ion-coffee" ng-if="item.category === 'cafe'"></i>
          <i class="icon ion-icecream" ng-if="item.category === 'ic'"></i>
          <i class="icon ion-ios-briefcase" ng-if="item.category === 'tech'"></i>
          <i class="icon ion-android-restaurant" ng-if="item.category === 'restaurant'"></i>

          {{item.name}}
          <p ng-bind="+item.distance.toFixed(1) + 'kms away'"></p>
        </ion-item>
      </ion-list>
    </ion-content>
  </ion-view>
</script>

<script id="modal.html" type="text/ng-template">
  <ion-modal-view class="transparent modal modal-dialog">
    <div class="card card-guests-detail margin-0 transparent" on-swipe-left="onSwipeLeft()" on-swipe-right="onSwipeRight()">
      <div class="item transparent">
        <div class="item-avatar-center-big" style="min-height: 120px!important;">
          <div class="item-avatar-container">
            <img ng-src="{{'http://graph.facebook.com/' + item.fbId + '/picture?type=large'}}">
          </div>
        </div>
        <div class="custom-placeholder">
          <br><br><br>
          <h2>{{item.name}}</h2>
          <p>{{profileData.hyperPitch}}</p>
              <img src="img/requestAdd.png" class="header-person-add" style="height: 32px;width: 32px; " ng-if="item.relation === 'stranger'" ng-click="addFriend(item.userId)">
              <img src="img/requestSent.png" class="header-person-add" style="height: 32px;width: 32px;" ng-if="item.relation === 'sentRequest'">
              <img src="img/requestSent.png" class="header-person-add" style="height: 32px;width: 32px;" ng-if="item.relation === 'receivedRequest'">

              <img src="img/requestAccepted.png" class="header-person-add" style="height: 32px;width: 32px;" ng-if="item.relation === 'friend'">
        </div>
        <div class="clearfix"></div>
      </div>
    </div>
    <div class="modal-body">
      <ion-list on-swipe-left="onSwipeLeft()" on-swipe-right="onSwipeRight()">
        <ion-item class="item item-body">
          <div class="row">
            <a class="tab-item">
              <i class="icon ion-social-linkedin icon-change"></i>
            </a>
            <a class="tab-item">
              <i class="icon ion-social-facebook icon-change"></i>
            </a>
            <a class="tab-item">
              <i class="icon ion-social-twitter-outline"></i>
            </a>
            <a class="tab-item">
              <i class="icon ion-social-instagram-outline"></i>
            </a>
            <a class="tab-item">
              <i class="icon ion-social-googleplus"></i>
            </a>
          </div>
          <div class="clearfix"></div>
          <div class="row">
            <button class="button button-assertive col-offset-25 col-50" ng-if="!currentUserFollowStatus"
            ng-click="follow(item._id)">
              Follow
            </button>
            <button class="button button-stable col-offset-25 col-50" ng-if="currentUserFollowStatus"
            ng-click="unFollow(item._id)">
              Unfollow
            </button>
          </div>

        </ion-item>
        <ion-item>
          <div class="">Common Connections</div>
          <div class="row row-wrap">
            <div class="col col-10" ng-repeat="item in profileData.mutualFriends">
              <div class="card card-hosts margin-0">
                <div class="item item-borderless item-avatar-center-small">
                  <img src="{{'http://graph.facebook.com/' + item.fbId + '/picture?type=small'}}" />
                  <h2 ng-bind="item.name"></h2>
                </div>
              </div>
            </div>
          </div>
        </ion-item>
        <ion-item>
          <div class="">Skills</div>
          <div class="row">
            <button class="button button-small button-light">UI/UX</button>
            <button class="button button-small button-light">Product Design</button>
            <button class="button button-small button-light">Wireframes</button>
          </div>
        </ion-item>
      </ion-list>
    </div>
  </ion-modal-view>
</script>

<script id="eventDetails.html" type="text/ng-template">
  <ion-view class="background-color-grey">
    <ion-nav-title>
      <button class="button button-icon icon ion-arrow-down-b icon-right" ng-click="openPopover($event)">{{placeName.placeName}}
      </button>
    </ion-nav-title>
    <ion-header-bar class="bar-royal bar-subheader item-input-inset">
      <label class="item-input-wrapper">
        <i class="icon ion-ios-search placeholder-icon"></i>
        <input type="search" placeholder="Search">
      </label>
    </ion-header-bar>
    <ion-content class="padding">
      <div class="row row-wrap" ng-repeat="row in lists" ng-init="rowIndex = $index">
        <div class="col col-33" ng-repeat="list in row" ng-init="colIndex = $index" ng-click="openModal(list, colIndex, rowIndex, 'slideInUp')">
          <div class="card card-guests margin-0">
            <div class="item item-borderless item-avatar-center">
              <img ng-src="{{'http://graph.facebook.com/' + list.fbId + '/picture?type=small'}}">
              <h2 ng-bind="list.name"></h2>
              <p ng-bind=""></p>
            </div>
          </div>
        </div>
      </div>
    </ion-content>
  </ion-view>
</script>

<script id="event-popup.html" type="text/ng-template">
  <ion-header-bar class="bar bar-header bar-stable">
    <h1 class="title" ng-bind="items[index].name"></h1>
  </ion-header-bar>
  <!-- <br>
  <h5 class="popup-sub-title">HOSTS</h5>
  <div class="row row-wrap">
    <div class="col col-20" ng-repeat="item in hosts">
      <div class="card card-hosts margin-0">
        <div class="item item-borderless item-avatar-center-small">
          <img src="img/avatar.jpg" />
          <h2 ng-bind="item.hostName"></h2>
        </div>
      </div>
    </div>
  </div>
  <br>
  <h5 class="popup-sub-title">ENTER 4 DIGIT CODE</h5>
  <br>
  <div class="row">
    <div class="col col-25">
      <label class="item item-input">
        <input type="password" maxlength="1">
      </label>
    </div>
    <div class="col col-25">
      <label class="item item-input">
        <input type="password" maxlength="1">
      </label>
    </div>
    <div class="col col-25">
      <label class="item item-input">
        <input type="password" maxlength="1">
      </label>
    </div>
    <div class="col col-25">
      <label class="item item-input">
        <input type="password" maxlength="1">
      </label>
    </div>
  </div> -->
</script>


<script id="chatList.html" type="text/ng-template">
  <ion-view view-title="">
    <ion-content class="padding">
      <div class="list">
        <a class="item item-avatar" ng-repeat="item in chatList" ng-click="joinChat(item.userId)">
          <img ng-src="{{'http://graph.facebook.com/' + item.fbId + '/picture?type=small'}}">
          <h2 ng-bind="item.name"></h2>
          <!--<p ng-bind="item.lastMsg"></p>-->
        </a>
      </div>
    </ion-content>
  </ion-view>
</script>

<script id="chatBox.html" type="text/ng-template">
  <ion-view view-title="ChatBox">

  </ion-view>
</script>

<script id="feeds.html" type="text/ng-template">
  <ion-view view-title="">
    <ion-content>
      <div class="card">
        <div class="item item-text-wrap">
          This page is under construction
        </div>
      </div>
    </ion-content>
  </ion-view>
</script>

<script id="chat.html" type="text/ng-template">
  <ion-view id="chatView"
            cache-view="false"
            view-title="<i class='icon ion-chatbubble user-messages-top-icon'></i> <div class='msg-header-username'>{{toUser.username}}</div>">

    <div class="loader-center" ng-if="!doneLoading">
      <div class="loader">
        <i class="icon ion-loading-c"></i>
      </div>
    </div>

    <ion-content has-bouncing="true" class="has-footer"
                 delegate-handle="userMessageScroll">

      <div ng-repeat="message in messages track by $index" class="message-wrapper"
           on-hold="onMessageHold($event, $index, message)">

      <!--  <div>

          <img ng-click="viewProfile(message)" class="profile-pic left"
               ng-src="{{toUser.pic}}" onerror="onProfilePicError(this)" />

          <div class="chat-bubble left">

            <div class="message" ng-bind-html="message.message | nl2br" autolinker>
            </div>

            <div class="message-detail">
                              <span ng-click="viewProfile(message)"
                                    class="bold">{{toUser.username}}</span>,
              <span am-time-ago="message.timestamp"></span>
            </div>

          </div>
        </div>-->

        <div ng-if="user._id !== message.userId">

          <img ng-click="viewProfile(message)" class="profile-pic left"
               ng-src="" onerror="onProfilePicError(this)" />

          <div class="chat-bubble left">

            <div class="message" ng-bind-html="message.message | nl2br" autolinker>
            </div>

            <div class="message-detail">
                              <span ng-click="viewProfile(message)"
                                    class="bold">{{toUser.username}}</span>,
              <span am-time-ago="message.timestamp"></span>
            </div>

          </div>
        </div>

        <div ng-if="user._id === message.userId">

          <img ng-click="viewProfile(message)" class="profile-pic right"
               ng-src="" onerror="onProfilePicError(this)" />

          <div class="chat-bubble right">

            <div class="message" ng-bind-html="message.message | nl2br" autolinker>
            </div>

            <div class="message-detail">
                              <span ng-click="viewProfile(message)"
                                    class="bold">{{user.username}}</span>,
              <span am-time-ago="message.timestamp"></span>
            </div>

          </div>

        </div>

        <div class="cf"></div>

      </div>
    </ion-content>

    <form name="sendMessageForm" ng-submit="sendMessage(sendMessageForm)" novalidate>
      <ion-footer-bar class="bar-stable item-input-inset message-footer" keyboard-attach>
        <label class="item-input-wrapper">
          <textarea ng-model="input.message" value="" placeholder="Send {{toUser.username}} a message..." required minlength="1" maxlength="1500" msd-elastic></textarea>
        </label>
        <div class="footer-btn-wrap">
          <button class="button button-icon icon ion-android-send footer-btn" type="submit"
                  ng-disabled="!input.message || input.message === ''">
          </button>
        </div>
      </ion-footer-bar>
    </form>

  </ion-view>
</script>

<script id="popover.html" type="text/ng-template">
  <ion-popover-view style="margin-top:  12px;">
    <ion-content>
      <div class="list">
        <a class="item item-icon-left" ng-click="checkout()">
          <i class="icon ion-android-exit"></i>
          Checkout
        </a>
      </div>
    </ion-content>
  </ion-popover-view>
</script>


</body>
<!-- <div id="fb-root"> </div>-->
</html>
